import { useLocation, useNavigate } from 'react-router-dom';
import { useEffect } from 'react';

export default function Result() {
    const location = useLocation();
    const navigate = useNavigate();
    const { predicted_class, confidence } = location.state || {};

    useEffect(() => {
        if (!predicted_class) {
            navigate('/');
        }
    }, [predicted_class, navigate]);

    return (
        <div className="max-w-xl mx-auto mt-12 bg-white p-6 rounded-lg shadow-md">
            <h2 className="text-2xl font-bold text-green-600 text-center mb-4">
                ‚úÖ Prediction Result
            </h2>

            {predicted_class && (
                <div className="text-center">
                    <p className="text-xl text-gray-800 mb-4">
                        <strong>Detected Condition:</strong>
                    </p>
                    <p className="text-2xl font-semibold text-blue-700 capitalize mb-2">
                        {predicted_class}
                    </p>

                    {typeof confidence === 'number' && !isNaN(confidence) ? (
                        <p className="text-gray-600 mb-6">
                            Confidence: <strong>{confidence.toFixed(2)}%</strong>
                        </p>
                    ) : (
                        <p className="text-red-500 mb-6">Confidence score unavailable</p>
                    )}



                    <p className="text-sm text-gray-500 italic mb-6">
                        * This result is generated by an AI model and is for informational purposes only.
                        Always consult a medical professional for diagnosis and treatment.
                    </p>

                    <button
                        onClick={() => navigate('/predict')}
                        className="bg-blue-600 text-white px-6 py-2 rounded-md hover:bg-blue-700 transition"
                    >
                        üîÅ Try Another Image
                    </button>
                </div>
            )}
        </div>
    );
}
